"use strict";const inputShow=document.querySelector(".js-searchInput"),searchButton=document.querySelector(".js-searchButton"),reset=document.querySelector(".section__fav-reset"),resultList=document.querySelector(".js-main-list"),favoriteList=document.querySelector(".main__list-favorite"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let globalData=[],favorites=[];function conectToApi(){let e=inputShow.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{globalData=e,printShows(globalData)})}function handleClik(){conectToApi()}function printShows(){resultList.innerHTML="";for(const e of globalData){let t="";t=void 0===favorites.find(t=>t.show.id===e.show.id)?"":"favorite",null===e.show.image?resultList.innerHTML+=`<li id="${e.show.id}" class="js-list-item ${t}"><div class="js-list-div"><h2 class="js-showName">${e.show.name}</h2><img class= "js-image" src=${defaultImage} /></div></li>`:resultList.innerHTML+=`<li id="${e.show.id}" class="js-list-item ${t}"><div class="js-list-div"><h2 class="js-showName">${e.show.name}</h2><img class="js-image" src="${e.show.image.medium}"/></div></li>`}addListenerToCards()}function addListenerToCards(){const e=document.querySelectorAll(".js-list-item");for(const t of e)t.addEventListener("click",handleClickCard)}function handleClickCard(e){const t=e.currentTarget,i=parseInt(t.id),s=globalData.find(e=>e.show.id===i);void 0===favorites.find(e=>e.show.id===i)?favorites.push(s):favorites=favorites.filter(e=>e.show.id!==i),setLocalStorage(),printFavoriteList(),printShows()}function printFavoriteList(){favoriteList.innerHTML="";for(const e of favorites)null===e.show.image?favoriteList.innerHTML+=`<li id="${e.show.id}" class="list-fav"><div class="div-fav"><h1 class="title-fav">${e.show.name}</h1><img class="img-fav" src=${defaultImage}/><i id="${e.show.id}" class="fas fa-times-circle remove-fav"></i></div></li>`:favoriteList.innerHTML+=`<li data-id="${e.show.id}" class="list-fav"><div class="div-fav"><h1 class="title-fav">${e.show.name}</h1><img class="img-fav" src="${e.show.image.medium}"/><i id="${e.show.id}" class="fas fa-times-circle remove-fav"></i></div></li>`;addListenerToIcon()}function setLocalStorage(){localStorage.setItem("favorites",JSON.stringify(favorites))}function getLocalStorage(){favorites=JSON.parse(localStorage.getItem("favorites")),printFavoriteList(),printShows()}function addListenerToIcon(){const e=document.querySelectorAll(".remove-fav");for(const t of e)t.addEventListener("click",handleClickCard)}function resetLS(){favorites=[],localStorage.clear(),location.reload()}null!==localStorage.getItem("favorites")&&getLocalStorage(),searchButton.addEventListener("click",handleClik),reset.addEventListener("click",resetLS);