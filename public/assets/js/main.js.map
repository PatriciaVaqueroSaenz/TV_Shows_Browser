{"version":3,"sources":["01-global.js","02-fetch.js","03-paint.js","04-Fav.js","05-localStorage.js","06-deleteFav.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\nconst inputShow = document.querySelector(\".js-searchInput\");\nconst searchButton = document.querySelector(\".js-searchButton\");\nconst reset = document.querySelector(\".section__fav-reset\");\nconst resultList = document.querySelector(\".js-main-list\");\nconst favoriteList = document.querySelector(\".main__list-favorite\");\nconst defaultImage =\n  \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n\nlet globalData = [];\nlet favorites = [];\n\n// SI TIENE DATOS ALMACENADOS EN LS LOS RECUPERAMOS\nif (localStorage.getItem(\"favorites\") !== null) {\n  getLocalStorage();\n}\n","function conectToApi() {\n  let inputValue = inputShow.value.toLowerCase();\n\n  fetch(`//api.tvmaze.com/search/shows?q=${inputValue}`)\n    .then((response) => response.json())\n    .then((data) => {\n      globalData = data;\n      printShows(globalData);\n    });\n}\n\nfunction handleClik() {\n  conectToApi();\n}\n\nsearchButton.addEventListener(\"click\", handleClik);\n","function printShows() {\n  resultList.innerHTML = \"\";\n\n  for (const data of globalData) {\n    // Buscar si la serie que se está pintando está en favoritos\n    const isPresent = favorites.find(\n      (favoriteId) => favoriteId.show.id === data.show.id\n    );\n\n    // Si está en favoritos, se renderiza el li con la clase favorite\n    let classFavorite = \"\";\n    if (isPresent === undefined) {\n      classFavorite = \"\";\n    } else {\n      classFavorite = \"favorite\";\n    }\n\n    //PARA EL CASO EN QUE LA SERIE NO TENGA IMAGEN\n    if (data.show.image === null) {\n      resultList.innerHTML += `<li id=\"${data.show.id}\" class=\"js-list-item ${classFavorite}\"><div class=\"js-list-div\"><h2 class=\"js-showName\">${data.show.name}</h2><img class= \"js-image\" src=${defaultImage} /></div></li>`;\n\n      //PARA LAS SERIES CON IMAGEN LA AÑADE AL LI\n    } else {\n      resultList.innerHTML += `<li id=\"${data.show.id}\" class=\"js-list-item ${classFavorite}\"><div class=\"js-list-div\"><h2 class=\"js-showName\">${data.show.name}</h2><img class=\"js-image\" src=\"${data.show.image.medium}\"/></div></li>`;\n    }\n  }\n  addListenerToCards();\n}\n","function addListenerToCards() {\n  const allCards = document.querySelectorAll(\".js-list-item\");\n  for (const card of allCards) {\n    card.addEventListener(\"click\", handleClickCard);\n  }\n}\n\nfunction handleClickCard(event) {\n  //IDENTIFICAR LI PULSADA\n  const selectedCard = event.currentTarget;\n\n  //OBTENER ID ASOCIADO A LA SERIE CLICKADA\n  const cardId = parseInt(selectedCard.id);\n\n  //BUSCAMOS POR ID EN GLOBALDATA\n  const showInfo = globalData.find((showItem) => showItem.show.id === cardId);\n\n  // Buscar si la paleta clickada está en favoritos\n  const isPresent = favorites.find(\n    (favoriteId) => favoriteId.show.id === cardId\n  );\n\n  if (isPresent === undefined) {\n    //En la que ha hecho click no está en el array de favoritos: añadimos a favoritos\n    favorites.push(showInfo);\n  } else {\n    //Si está, filtramos\n    favorites = favorites.filter((favoriteId) => favoriteId.show.id !== cardId);\n  }\n\n  //guardo favoritos en LS\n  setLocalStorage();\n  //repintamos la lista de favoritos para actualizar\n  printFavoriteList();\n  //repintamos la lista de resultados para actualizar\n  printShows();\n}\n\nfunction printFavoriteList() {\n  favoriteList.innerHTML = \"\";\n\n  for (const fav of favorites) {\n    if (fav.show.image === null) {\n      favoriteList.innerHTML += `<li id=\"${fav.show.id}\" class=\"list-fav\"><div class=\"div-fav\"><h1 class=\"title-fav\">${fav.show.name}</h1><img class=\"img-fav\" src=${defaultImage}/><i id=\"${fav.show.id}\" class=\"fas fa-times-circle remove-fav\"></i></div></li>`;\n    } else {\n      favoriteList.innerHTML += `<li data-id=\"${fav.show.id}\" class=\"list-fav\"><div class=\"div-fav\"><h1 class=\"title-fav\">${fav.show.name}</h1><img class=\"img-fav\" src=\"${fav.show.image.medium}\"/><i id=\"${fav.show.id}\" class=\"fas fa-times-circle remove-fav\"></i></div></li>`;\n    }\n  }\n  addListenerToIcon();\n}\n","function setLocalStorage() {\n  localStorage.setItem(\"favorites\", JSON.stringify(favorites));\n}\n\nfunction getLocalStorage() {\n  //recupero el array de favoritos almacenado en ls\n  favorites = JSON.parse(localStorage.getItem(\"favorites\"));\n  //pinto la lista de favoritos con lo almacenado en ls\n  printFavoriteList();\n  //pinto la lista de resultados\n  printShows();\n}\n","function addListenerToIcon() {\n  const allIcons = document.querySelectorAll(\".remove-fav\");\n  for (const icon of allIcons) {\n    //al pulsar en los iconos evaluamos con la función si están o no en favoritos y repintamos\n    icon.addEventListener(\"click\", handleClickCard);\n  }\n}\n\nfunction resetLS() {\n  //vaciamos el array de favoritos\n  favorites = [];\n  //limpiamos el ls\n  localStorage.clear();\n  //recargar la página después de borrar\n  location.reload();\n}\n\nreset.addEventListener(\"click\", resetLS);\n"]}